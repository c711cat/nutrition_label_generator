import{u as y}from"./foodDataStore-DC37HNJS.js";import{_,m as k,c as d,b as e,F as f,r as b,g as h,h as m,w as i,i as a,j as g,o as r,t as u,d as x}from"./index-DaWMbUU1.js";const w={data(){return{filteredData:[]}},computed:{...k(y,["newKeyFoodData","product"])},methods:{searchFood(l){const t=[];this.newKeyFoodData.filter(s=>{(s.sample_name&&s.sample_name.match(l)||s.common_name&&s.common_name.match(l))&&t.push(s)}),this.filteredData=t},chooseSample(l){const t=this.product.ingredients.find(s=>s.sample_name==="");t&&(t.id=Date.now(),t.details=l,t.sample_name=l.sample_name,l.common_name&&(t.common_name=l.common_name))},addNewField(){const l={id:"",sample_name:"",foodName:"",grams:""};this.product.ingredients.push(l)},delField(l){const t=this.product.ingredients.indexOf(l);this.product.ingredients.splice(t,1)},submitForm(l){const t=l.target;if(!t.checkValidity()){t.classList.add("was-validated");return}this.$router.push("/mark_items")}},created(){this.filteredData=this.newKeyFoodData}},F={class:"container mt-4"},V={class:"form-floating mb-5"},N={class:"col-12 justify-content-between row flex-nowrap mx-0 mb-5"},j={class:"col-4 col-xl-2 px-0 me-1"},C={class:"list-group rounded visibleHeight overflow-y-auto"},D=["onClick"],U={class:"mb-0 px-2"},q={key:0,class:"mb-0 px-2 text-secondary"},W={class:"col-12 col-xl-6"},I={class:"col-12 col-xl-6"},S={class:"col-12 col-xl-6 d-flex"},B={class:"col-12"},K={class:"col-12 d-flex flex-wrap justify-content-between"},L={class:"col-12 col-xl-6"},M={class:"mt-2 col-12 col-xl-5 text-xl-center"},O={class:"form-check form-check-inline"},H={class:"form-check form-check-inline"},Q={class:"col-12 col-xl-6"},T={class:"col-12"},z={class:"px-1 list-group-item col-12 col-xl-3 d-flex flex-column justify-content-center"},E={class:"mb-0"},R={key:0,class:"ps-3 mb-0"},A={class:"px-0 list-group-item col-12 col-xl-4 d-flex flex-column justify-content-center"},G=["onUpdate:modelValue","id"],J={class:"px-0 list-group-item col-12 col-xl-3 d-flex flex-column justify-content-center"},P=["onUpdate:modelValue","id"],X={class:"d-none d-xl-block list-group-item col-1 align-content-center"},Y=["onClick"],Z={class:"d-block d-xl-none position-absolute delBtn-xs list-group"},$=["onClick"],tt={class:"my-3 col-12"};function et(l,t,s,ot,v,n){return r(),d("main",F,[t[26]||(t[26]=e("h3",{class:"text-center mb-4"},"營養標示製作",-1)),e("section",V,[e("input",{onChange:t[0]||(t[0]=o=>n.searchFood(o.target.value)),type:"search",class:"form-control",id:"searchInput",placeholder:"請輸入食物成分搜尋"},null,32),t[9]||(t[9]=e("label",{for:"searchInput"},"請輸入食物成分搜尋",-1))]),e("div",null,[e("div",N,[e("section",j,[e("div",C,[(r(!0),d(f,null,b(v.filteredData,o=>(r(),d("button",{key:o.id,onClick:p=>n.chooseSample(o),type:"button",class:"list-group-item list-group-item-action px-1","aria-current":"true"},[e("p",U,u(o.sample_name),1),o.common_name?(r(),d("p",q," 俗名："+u(o.common_name),1)):x("",!0)],8,D))),128))])]),e("form",{id:"form_id",onSubmit:t[8]||(t[8]=h((...o)=>n.submitForm&&n.submitForm(...o),["prevent"])),class:"row m-0 g-3 align-content-start col-8 col-xl visibleHeight overflow-y-auto",novalidate:""},[e("section",W,[t[10]||(t[10]=e("label",{for:"productName",class:"form-label fw-bold ps-1 d-flex justify-content-start"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 商品名稱 ")],-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.product.title=o),type:"text",class:"form-control",id:"productName",placeholder:"請輸入商品名稱",required:""},null,512),[[a,l.product.title,void 0,{trim:!0}]]),t[11]||(t[11]=e("div",{class:"invalid-feedback"},"此欄位為必填",-1))]),e("section",I,[t[12]||(t[12]=e("label",{for:"number_of_copies",class:"form-label fw-bold ps-1 d-flex justify-content-start"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 以下食材總量共可製成幾份成品？ ")],-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.product.numberOfCopy=o),type:"number",min:"1",class:"form-control",id:"number_of_copies",placeholder:"輸入共可製成幾份成品",required:""},null,512),[[a,l.product.numberOfCopy]]),t[13]||(t[13]=e("div",{class:"invalid-feedback"},"此欄位為必填，且需大於等於 1",-1))]),e("section",S,[e("div",B,[t[17]||(t[17]=e("label",{for:"net_weight",class:"form-label fw-bold ps-1 d-flex justify-content-start col-12"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 每一份成品淨重？ ")],-1)),e("div",K,[e("div",L,[i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.product.netWeightInformation.netWeight=o),type:"number",min:"1",class:"form-control me-3",id:"net_weight",placeholder:"輸入淨重",required:""},null,512),[[a,l.product.netWeightInformation.netWeight]]),t[14]||(t[14]=e("div",{class:"invalid-feedback"}," 此欄位為必填，且需大於等於 1 ",-1))]),e("div",M,[e("div",O,[i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.product.netWeightInformation.unit=o),class:"form-check-input",type:"radio",id:"gram",value:"公克"},null,512),[[g,l.product.netWeightInformation.unit]]),t[15]||(t[15]=e("label",{class:"form-check-label",for:"gram"},"公克",-1))]),e("div",H,[i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.product.netWeightInformation.unit=o),class:"form-check-input",type:"radio",id:"milliliter",value:"毫升"},null,512),[[g,l.product.netWeightInformation.unit]]),t[16]||(t[16]=e("label",{class:"form-check-label",for:"milliliter"}," 毫升 ",-1))])])])])]),e("section",Q,[t[18]||(t[18]=e("label",{for:"product_quantity",class:"form-label fw-bold ps-1 d-flex justify-content-start"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 本包裝含幾份成品？ ")],-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.product.productQty=o),type:"number",min:"1",class:"form-control",id:"product_quantity",placeholder:"輸入本包裝含幾份成品",required:""},null,512),[[a,l.product.productQty]]),t[19]||(t[19]=e("div",{class:"invalid-feedback"},"此欄位為必填，且需大於等於 1",-1))]),e("section",T,[t[24]||(t[24]=e("p",{class:"mb-0 py-2 ms-1 fw-bold"},[e("span",{class:"text-danger"},"＊"),m(" 從左邊資料庫點選成分，並填入各欄位所需資料 ")],-1)),(r(!0),d(f,null,b(l.product.ingredients,(o,p)=>(r(),d("ul",{key:o.id,class:"border-top rounded-0 position-relative col-12 list-group list-group-horizontal-xl d-flex flex-wrap justify-content-between"},[e("li",z,[e("p",E,u(p+1)+". "+u(o.sample_name),1),o.common_name?(r(),d("p",R," 俗名:"+u(o.common_name),1)):x("",!0)]),e("li",A,[i(e("input",{"onUpdate:modelValue":c=>o.foodName=c,type:"text",id:"foodName"+p,placeholder:"輸入欲示於外包裝成分",class:"form-control",required:""},null,8,G),[[a,o.foodName,void 0,{trim:!0}]]),t[20]||(t[20]=e("div",{class:"invalid-feedback"},"此欄位為必填",-1))]),e("li",J,[i(e("input",{"onUpdate:modelValue":c=>o.grams=c,type:"number",id:"grams"+p,min:"1",placeholder:"輸入該成分『 總克數 』",class:"form-control",required:""},null,8,P),[[a,o.grams]]),t[21]||(t[21]=e("div",{class:"invalid-feedback"},"此欄位為必填，且需大於等於 1",-1))]),e("li",X,[e("button",{onClick:c=>n.delField(o),type:"button",class:"btn btn-outline-danger btn-sm d-block"},t[22]||(t[22]=[e("i",{class:"bi bi-x-lg"},null,-1)]),8,Y)]),e("li",Z,[e("button",{onClick:c=>n.delField(o),type:"button",class:"btn btn-outline-danger btn-sm"},t[23]||(t[23]=[e("i",{class:"bi bi-x-lg"},null,-1)]),8,$)])]))),128)),e("div",tt,[e("button",{type:"button",class:"btn btn-outline-primary w-100",onClick:t[7]||(t[7]=(...o)=>n.addNewField&&n.addNewField(...o))}," 新增欄位 ")])])],32)]),t[25]||(t[25]=e("div",{class:"col-12 text-end mb-4 px-1"},[e("button",{form:"form_id",type:"submit",class:"col-12 col-xl-10 btn btn-primary"}," 送出以上資料 ")],-1))])])}const nt=_(w,[["render",et],["__scopeId","data-v-8fc20561"]]);export{nt as default};
