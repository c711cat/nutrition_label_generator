import{u as C}from"./foodDataStore-CuRjDprF.js";import{D as k,u as c}from"./DoubleCheckModal-CpxpnQ_P.js";import{u as x}from"./messageStore-D4ipyxXN.js";import{_ as w,m as p,g as f,c as r,d as t,j as d,v as n,b as u,F as b,e as g,i as N,a as h,o as l,t as v,r as y}from"./index-B2AOrsMC.js";import{A as V}from"./AddNutrientsModal-CfcF1FGG.js";import"./component-functions-BBVq3xqC.js";const A={data(){return{header:[],filteredHeader:[],nutrients:{calories:"熱量(kcal)",protein:"蛋白質(g)",fat:"脂肪(g)",saturated_fat:"飽和脂肪(g)",trans_fat:"反式脂肪(g)",total_carbohydrates:"碳水化合物(g)",total_sugar:"糖(g)",sodium:"鈉(mg)"}}},components:{AddNutrientsModal:V,DoubleCheckModal:k},computed:{...p(C,["headerChineseAndEnglish","myProductList","baseFoodData"]),...p(c,["customDataList","addOthersNutrients","customFood"])},methods:{...f(c,["setCustomData","clearCustomFood","updateList","clearAddOtherNts"]),...f(x,["openAlert"]),getHeader(){const s={...this.headerChineseAndEnglish};["id","category","sample_name","common_name","content_description","scrap_rate","calories","corrected_calories","protein","fat","saturated_fat","total_carbohydrates","total_sugar","sodium","trans_fat"].forEach(e=>{delete s[e]}),this.header=s,this.filteredHeader=s},submitForm(s){const e=s.target;if(e.checkValidity())this.$refs.doubleCheckModal.showModal("custom");else{e.classList.add("was-validated"),this.openAlert(!0);return}},openModal(){this.$refs.addNutrientsModal.showCustomModal(this.customFood)}},created(){this.getHeader()}},D={class:"container col-lg-9 mt-4"},S={class:"py-3 col-12 col-lg"},U={class:"form-floating mb-3"},L={class:"form-floating"},E={class:"py-3 col-12 col-lg-auto mb-5"},H={class:"mb-4"},q={class:"fw-normal px-3"},B={class:"col-6 col-sm-auto"},O=["onUpdate:modelValue","name","id"],j={class:"fw-normal px-3"},T=["onUpdate:modelValue","name","id"];function $(s,e,I,P,m,i){const _=y("AddNutrientsModal"),F=y("DoubleCheckModal");return l(),r("div",D,[e[13]||(e[13]=t("h3",{class:"text-center py-3"},"新增自訂義食材",-1)),t("form",{onSubmit:e[3]||(e[3]=N((...o)=>i.submitForm&&i.submitForm(...o),["prevent"])),class:"row m-0 justify-content-between",novalidate:""},[t("div",S,[t("div",U,[d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.customFood.sample_name=o),type:"text",class:"form-control",id:"sample_name",placeholder:"食材名稱",required:""},null,512),[[n,s.customFood.sample_name,void 0,{trim:!0}]]),e[4]||(e[4]=t("div",{class:"invalid-feedback"},"此欄位為必填",-1)),e[5]||(e[5]=t("label",{for:"sample_name",class:""},[t("i",{class:"text-danger fst-normal"},"＊"),u(" 食材名稱 ")],-1))]),t("div",L,[d(t("textarea",{style:{height:"200px"},"onUpdate:modelValue":e[1]||(e[1]=o=>s.customFood.content_description=o),type:"text",class:"form-control",id:"content_description",placeholder:"成分 （ 填入相同於包裝上顯示的成分 ）",required:""},null,512),[[n,s.customFood.content_description,void 0,{trim:!0}]]),e[6]||(e[6]=t("div",{class:"invalid-feedback"},"此欄位為必填",-1)),e[7]||(e[7]=t("label",{for:"content_description",class:"text-wrap"},[t("i",{class:"text-danger fst-normal"},"＊"),u(" 成分 （ 填入相同於包裝上的成分，順序也必須相同 ） ")],-1))])]),t("div",E,[t("table",H,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",{colspan:"2",class:"px-3 fs-5"}," 營養標示 - 依包裝上的數值填入 ")])],-1)),t("tbody",null,[e[10]||(e[10]=t("tr",{class:"text-center"},[t("th"),t("td",{class:"py-2"},"每 100 公克 / 毫升")],-1)),(l(!0),r(b,null,g(m.nutrients,(o,a)=>(l(),r("tr",{key:o},[t("th",q,[e[8]||(e[8]=t("i",{class:"text-danger fst-normal"},"＊",-1)),u(" "+v(o),1)]),t("td",B,[d(t("input",{"onUpdate:modelValue":M=>s.customFood[a]=M,type:"number",name:a,id:a,class:"form-control text-center",required:"",min:"0",step:"0.0001"},null,8,O),[[n,s.customFood[a]]]),e[9]||(e[9]=t("div",{class:"invalid-feedback"},"此欄位為必填",-1))])]))),128)),(l(!0),r(b,null,g(s.addOthersNutrients,o=>(l(),r("tr",{key:o},[t("th",j,v(m.header[o]),1),t("td",null,[d(t("input",{"onUpdate:modelValue":a=>s.customFood[o]=a,type:"number",name:o,id:o,class:"form-control text-center",min:"0",step:"0.01"},null,8,T),[[n,s.customFood[o]]])])]))),128))])]),t("div",null,[t("button",{onClick:e[2]||(e[2]=o=>i.openModal()),type:"button",class:"btn btn-outline-primary col-12"}," 新增其他營養素 ")])]),e[12]||(e[12]=t("div",{class:"text-end py-4"},[t("button",{type:"submit",class:"col-12 col-lg-auto btn btn-primary"}," 送出資料 ")],-1))],32),h(_,{ref:"addNutrientsModal"},null,512),h(F,{ref:"doubleCheckModal"},null,512)])}const W=w(A,[["render",$],["__scopeId","data-v-c02bab01"]]);export{W as default};
