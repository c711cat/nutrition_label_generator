import{u as y}from"./foodDataStore-CuRjDprF.js";import{_,m as k,g as h,c as s,d as e,F as b,e as g,i as w,b as m,j as d,v as r,k as x,o as n,t as u,h as v}from"./index-B2AOrsMC.js";import{u as F}from"./messageStore-D4ipyxXN.js";const N={data(){return{filteredData:[],alert:!1}},computed:{...k(y,["baseFoodData","product"])},methods:{...h(F,["openAlert"]),searchFood(l){const t=[];this.baseFoodData.filter(i=>{(i.sample_name&&i.sample_name.match(l)||i.common_name&&i.common_name.match(l))&&t.push(i)}),this.filteredData=t},chooseSample(l){const t=this.product.ingredients.find(i=>i.sample_name==="");t&&(t.id=Date.now(),t.details=l,t.sample_name=l.sample_name,l.common_name&&(t.common_name=l.common_name),t.details.category==="自定義"&&(l.sample_name===l.content_description?t.foodName=l.sample_name:t.foodName=l.sample_name+" ( "+l.content_description+" ) "))},addNewField(){const l={id:"",sample_name:"",foodName:"",grams:"",details:""};this.product.ingredients.push(l)},delField(l){const t=this.product.ingredients.indexOf(l);this.product.ingredients.splice(t,1)},submitForm(l){const t=l.target;if(!t.checkValidity()){t.classList.add("was-validated"),this.openAlert(!0);return}this.$router.push("/mark_items")}},created(){this.filteredData=this.baseFoodData}},V={class:"container mt-4"},j={class:"form-floating mb-5"},C={class:"col-12 justify-content-between row flex-nowrap mx-0 mb-5"},D={class:"col-4 col-xl-2 px-0 me-1"},U={key:0,class:"py-5"},q={key:1,class:"list-group rounded visibleHeight overflow-y-auto"},W=["onClick"],S={class:"mb-0 px-2"},B={key:0,class:"mb-0 px-2 text-secondary"},M={class:"col-12 col-xl-6"},A={class:"col-12 col-xl-6"},L={class:"col-12 col-xl-6 d-flex"},O={class:"col-12"},H={class:"col-12 d-flex flex-wrap justify-content-between"},I={class:"col-12 col-xl-6"},Q={class:"mt-2 col-12 col-xl-5 text-xl-center"},T={class:"form-check form-check-inline"},z={class:"form-check form-check-inline"},E={class:"col-12 col-xl-6"},R={class:"col-12"},G={class:"px-1 list-group-item col-12 col-xl-3 d-flex flex-column justify-content-center"},J={class:"mb-0"},K={key:0,class:"ps-3 mb-0"},P={class:"px-0 list-group-item col-12 col-xl-4 d-flex flex-column justify-content-center"},X=["onUpdate:modelValue","id","disabled"],Y={class:"px-0 list-group-item col-12 col-xl-3 d-flex flex-column justify-content-center"},Z=["onUpdate:modelValue","id"],$={class:"d-none d-xl-block list-group-item col-1 align-content-center"},tt=["onClick"],et={class:"d-block d-xl-none position-absolute delBtn-xs list-group"},ot=["onClick"],lt={class:"my-3 col-12"};function st(l,t,i,nt,f,a){return n(),s("main",V,[t[27]||(t[27]=e("h3",{class:"text-center mb-4"},"營養標示製作",-1)),e("section",j,[e("input",{onChange:t[0]||(t[0]=o=>a.searchFood(o.target.value)),type:"search",class:"form-control",id:"searchInput",placeholder:"請輸入食物成分搜尋"},null,32),t[9]||(t[9]=e("label",{for:"searchInput"},"請輸入食物成分搜尋",-1))]),e("div",null,[e("div",C,[e("section",D,[f.filteredData.length===0?(n(),s("div",U,t[10]||(t[10]=[e("p",{class:"mb-0 text-center fw-bold"},"無相符品項",-1)]))):(n(),s("div",q,[(n(!0),s(b,null,g(f.filteredData,o=>(n(),s("button",{key:o.id,onClick:p=>a.chooseSample(o),type:"button",class:"list-group-item list-group-item-action px-1","aria-current":"true"},[e("p",S,u(o.sample_name),1),o.common_name?(n(),s("p",B," 俗名："+u(o.common_name),1)):v("",!0)],8,W))),128))]))]),e("form",{id:"form_id",onSubmit:t[8]||(t[8]=w((...o)=>a.submitForm&&a.submitForm(...o),["prevent"])),class:"row m-0 g-3 align-content-start col-8 col-xl visibleHeight overflow-y-auto",novalidate:""},[e("section",M,[t[11]||(t[11]=e("label",{for:"productName",class:"form-label fw-bold ps-1 d-flex justify-content-start"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 商品名稱 ")],-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.product.title=o),type:"text",class:"form-control",id:"productName",placeholder:"請輸入商品名稱",required:""},null,512),[[r,l.product.title,void 0,{trim:!0}]]),t[12]||(t[12]=e("div",{class:"invalid-feedback"},"此欄位為必填",-1))]),e("section",A,[t[13]||(t[13]=e("label",{for:"number_of_copies",class:"form-label fw-bold ps-1 d-flex justify-content-start"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 以下食材總量共可製成幾份成品？ ")],-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.product.numberOfCopy=o),type:"number",min:"1",class:"form-control",id:"number_of_copies",placeholder:"輸入共可製成幾份成品",required:""},null,512),[[r,l.product.numberOfCopy]]),t[14]||(t[14]=e("div",{class:"invalid-feedback"},"此欄位為必填，且需大於等於 1",-1))]),e("section",L,[e("div",O,[t[18]||(t[18]=e("label",{for:"net_weight",class:"form-label fw-bold ps-1 d-flex justify-content-start col-12"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 每一份成品淨重？ ")],-1)),e("div",H,[e("div",I,[d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.product.netWeightInformation.netWeight=o),type:"number",min:"1",class:"form-control me-3",id:"net_weight",placeholder:"輸入淨重",required:""},null,512),[[r,l.product.netWeightInformation.netWeight]]),t[15]||(t[15]=e("div",{class:"invalid-feedback"}," 此欄位為必填，且需大於等於 1 ",-1))]),e("div",Q,[e("div",T,[d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.product.netWeightInformation.unit=o),class:"form-check-input",type:"radio",id:"gram",value:"公克"},null,512),[[x,l.product.netWeightInformation.unit]]),t[16]||(t[16]=e("label",{class:"form-check-label",for:"gram"},"公克",-1))]),e("div",z,[d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.product.netWeightInformation.unit=o),class:"form-check-input",type:"radio",id:"milliliter",value:"毫升"},null,512),[[x,l.product.netWeightInformation.unit]]),t[17]||(t[17]=e("label",{class:"form-check-label",for:"milliliter"}," 毫升 ",-1))])])])])]),e("section",E,[t[19]||(t[19]=e("label",{for:"product_quantity",class:"form-label fw-bold ps-1 d-flex justify-content-start"},[e("div",{class:"pe-1 d-flex align-items-center"},[e("i",{class:"text-danger fst-normal"},"＊")]),m(" 本包裝含幾份成品？ ")],-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.product.productQty=o),type:"number",min:"1",class:"form-control",id:"product_quantity",placeholder:"輸入本包裝含幾份成品",required:""},null,512),[[r,l.product.productQty]]),t[20]||(t[20]=e("div",{class:"invalid-feedback"},"此欄位為必填，且需大於等於 1",-1))]),e("section",R,[t[25]||(t[25]=e("p",{class:"mb-0 py-2 ms-1 fw-bold"},[e("span",{class:"text-danger"},"＊"),m(" 從左邊資料庫點選成分，並填入各欄位所需資料 ")],-1)),(n(!0),s(b,null,g(l.product.ingredients,(o,p)=>(n(),s("ul",{key:o.id,class:"border-top rounded-0 position-relative col-12 list-group list-group-horizontal-xl d-flex flex-wrap justify-content-between"},[e("li",G,[e("p",J,u(p+1)+". "+u(o.sample_name),1),o.common_name?(n(),s("p",K," 俗名:"+u(o.common_name),1)):v("",!0)]),e("li",P,[d(e("input",{"onUpdate:modelValue":c=>o.foodName=c,type:"text",id:"foodName"+p,disabled:o.details.category==="自定義",placeholder:"輸入欲示於外包裝成分",class:"form-control",required:""},null,8,X),[[r,o.foodName,void 0,{trim:!0}]]),t[21]||(t[21]=e("div",{class:"invalid-feedback"},"此欄位為必填",-1))]),e("li",Y,[d(e("input",{"onUpdate:modelValue":c=>o.grams=c,type:"number",id:"grams"+p,min:"0.1",step:"0.1",placeholder:"輸入該成分『 總克數 』",class:"form-control",required:""},null,8,Z),[[r,o.grams]]),t[22]||(t[22]=e("div",{class:"invalid-feedback"},"此欄位為必填，且需大於 0",-1))]),e("li",$,[e("button",{onClick:c=>a.delField(o),type:"button",class:"btn btn-outline-danger btn-sm d-block"},t[23]||(t[23]=[e("i",{class:"bi bi-x-lg"},null,-1)]),8,tt)]),e("li",et,[e("button",{onClick:c=>a.delField(o),type:"button",class:"btn btn-outline-danger btn-sm"},t[24]||(t[24]=[e("i",{class:"bi bi-x-lg"},null,-1)]),8,ot)])]))),128)),e("div",lt,[e("button",{type:"button",class:"btn btn-outline-primary w-100",onClick:t[7]||(t[7]=(...o)=>a.addNewField&&a.addNewField(...o))}," 新增欄位 ")])])],32)]),t[26]||(t[26]=e("div",{class:"col-12 text-end mb-4 px-1"},[e("button",{form:"form_id",type:"submit",class:"col-12 col-xl-10 btn btn-primary"}," 送出以上資料 ")],-1))])])}const rt=_(N,[["render",st],["__scopeId","data-v-344a3e32"]]);export{rt as default};
